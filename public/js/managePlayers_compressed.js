function updateUserTeam(a,b,c,d,e,f,g,h,i,j,k,l){firebase.database().ref("users/"+a+"/"+b).update({img:c,playerName:d,position:e,pointsPerGame:f,reboundsPerGame:h,assistsPerGame:i,stealsPerGame:k,blocksPerGame:j,fieldGoalPercentage:g,playerEfficiencyRating:l}).then(function(){return!0})}function resetFields(){document.getElementById("name").value="",document.getElementById("PPG").value="",document.getElementById("RPG").value="",document.getElementById("APG").value="",document.getElementById("BPG").value="",document.getElementById("SPG").value="",document.getElementById("FG").value="",document.getElementById("PER").value="",document.getElementById("position").value="PG",document.getElementById("imgFile").value=""}var config={apiKey:"AIzaSyCcIuaDuAx9NFJKzBj4FkuR3e320eGuS_g",authDomain:"nbadex-ff8cf.firebaseapp.com",databaseURL:"https://nbadex-ff8cf.firebaseio.com",storageBucket:"nbadex-ff8cf.appspot.com",messagingSenderId:"172457613001"};firebase.initializeApp(config);const auth=firebase.auth();$(document).ready(function(){$("#LogOut").click(function(){event.preventDefault(),firebase.auth().signOut()})}),firebase.auth().onAuthStateChanged(function(a){a||(window.location="../index.html")});var playersRef=firebase.database().ref("players"),app=new Vue({el:"#app",firebase:{players:playersRef},methods:{addNewPlayer:function(){event&&event.preventDefault();var a=$("input:file"),b=a[0].value.split("\\");b[b.length-1];var d=document.getElementById("imgFile").files[0];const e=document.getElementById("name").value,f=e.split(" ")[0],g=e.split(" ")[1],h="Players/"+f+g;var i=firebase.storage().ref(h);name=f+g,lowername=name.toLowerCase();var j=i.child(lowername);j.put(d).then(function(){console.log("picture upload complete")});var k=firebase.database();k.ref("players/"+f+g).set({name:e,position:document.getElementById("position").value,pointsPerGame:document.getElementById("PPG").value,fieldGoalPercentage:document.getElementById("FG").value,assistsPerGame:document.getElementById("APG").value,reboundsPerGame:document.getElementById("RPG").value,stealsPerGame:document.getElementById("SPG").value,blocksPerGame:document.getElementById("BPG").value,playerEfficiencyRating:document.getElementById("PER").value}),resetFields()},populate:function(a){names=a.name;const b=names.split(" ")[0],c=names.split(" ")[1];name=b+c,lowername=name.toLowerCase(),firebase.storage().ref("Players/"+name).child(lowername).getDownloadURL().then(function(a){var b=document.getElementById("editImg");b.src=a}),document.getElementById("editName").value=a.name,document.getElementById("editPosition").value=a.position,document.getElementById("editPPG").value=a.pointsPerGame,document.getElementById("editFG").value=a.fieldGoalPercentage,document.getElementById("editAPG").value=a.assistsPerGame,document.getElementById("editRPG").value=a.reboundsPerGame,document.getElementById("editSPG").value=a.stealsPerGame,document.getElementById("editBPG").value=a.blocksPerGame,document.getElementById("editPER").value=a.playerEfficiencyRating},editPlayer:function(){event&&event.preventDefault(),names=document.getElementById("editName").value;const a=names.split(" ")[0],b=names.split(" ")[1];var c=firebase.database();c.ref("players/"+a+b).update({position:document.getElementById("editPosition").value,pointsPerGame:document.getElementById("editPPG").value,fieldGoalPercentage:document.getElementById("editFG").value,assistsPerGame:document.getElementById("editAPG").value,reboundsPerGame:document.getElementById("editRPG").value,stealsPerGame:document.getElementById("editSPG").value,blocksPerGame:document.getElementById("editBPG").value,playerEfficiencyRating:document.getElementById("editPER").value});var d=document.getElementById("imgFileEdit").files[0];if(d){const e="Players/"+a+b;var f=firebase.storage().ref(e);name=a+b,lowername=name.toLowerCase();var g=f.child(lowername);g.put(d).then(function(){console.log("picture upload complete")})}},deletePlayer:function(a){playersRef.child(a[".key"]).remove(),names=a.name;const b=names.split(" ")[0],c=names.split(" ")[1];name=b+c,lowername=name.toLowerCase(),firebase.storage().ref("Players/"+name).child(lowername).delete(),console.log("deleted "+a.name)},addToTeam:function(a){user=firebase.auth().currentUser,name=a.name.split(" ")[0]+a.name.split(" ")[1],lowername=name.toLowerCase(),firebase.storage().ref("Players/"+name).child(lowername).getDownloadURL().then(function(b){firebase.database().ref("users/"+user.uid).once("value").then(function(c){var d=c.forEach(function(b){var c=b.child("playerName").val()==a.name;if(c)return $("#player-full").css("visibility","hidden"),setTimeout(function(){$("#player-full").addClass("alert-danger").removeClass("alert-success"),$("#err-msg").html("Player exists in your team"),$("#player-full").css("visibility","visible")},50),!0});if(!d){for(var e=1;e<=10;){var f=c.child("player"+e).val();if("Choose Player"==f.playerName)return updateUserTeam(user.uid,"player"+e,b,a.name,a.position,a.pointsPerGame,a.fieldGoalPercentage,a.reboundsPerGame,a.assistsPerGame,a.blocksPerGame,a.stealsPerGame,a.playerEfficiencyRating),$("#player-full").css("visibility","hidden"),void setTimeout(function(){$("#player-full").addClass("alert-success").removeClass("alert-danger"),$("#err-msg").html("player added successfully"),$("#player-full").css("visibility","visible")},50);e++}$("#player-full").css("visibility","hidden"),setTimeout(function(){$("#player-full").addClass("alert-danger").removeClass("alert-success"),$("#err-msg").html("Team is full, cannot add more players"),$("#player-full").css("visibility","visible")},50)}})})}}});$("#close-btn").click(function(){$("#player-full").css("visibility","hidden")});
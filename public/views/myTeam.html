<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>
		<link rel="stylesheet" href= "/css/myTeam.css" type="text/css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
		<title>myTeam/Index</title>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	</head>
	<body>
		<nav class="navbar navbar-inverse navbar-static-top">
	        <div class="container">
	            <div class="navbar-header">
	                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
	                    <span class="sr-only">Toggle navigation</span>
	                    <span class="icon-bar"/>
	                    <span class="icon-bar"/>
	                    <span class="icon-bar"/>
	                </button>
	                <a class="navbar-brand" href="myTeam.html">NBADex</a>
	            </div>
	            <div class="collapse navbar-collapse">
	                <ul class="nav navbar-nav navbar-right">
	                    <li class="active"><a href="myTeam.html">My Team</a></li>
	                    <li><a href="managePlayers.html">Player Management</a></li>
	                    <li><a href="myTeamStats.html">View Stats</a></li>
	                    <li><a href="seasonSimulation.html">Simulate Season</a></li>
	                    <li><a href="" id="LogOut">Log Out</a></li>
	                </ul>
	            </div>
	        </div>
	    </nav>
	    <div class="container">
	    	<h1>Your Team</h1>
				<div class="row first">
					<div class="col-md-2 col-md-offset-1">
						<div class="centerBlock">
							<label>Point Guard</label>
							<img src="http://specials-images.forbesimg.com/imageserve/499832138/960x0.jpg?fit=scale7" class="img-responsive"/>
							<label>Russell Westbrook</label>
						</div>
					</div>
					<div class="col-md-2 ">
						<div class="centerBlock">
							<label>Shooting Guard</label>
							<img src="http://www.ferrdi.com/wp-content/uploads/2017/01/Harden.jpg" class="img-responsive"/>
							<label>James Harden</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Small Forward</label>
							<img src="http://image.nj.com/home/njo-media/width960/img/njcom_photos/photo/2014/06/30/-a91143a0ce4fb0bd.JPG" class="img-responsive"/>
							<label>LeBron James</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Power Forward</label>
							<img src="http://images.covers.com/editorial/2012/383x165/blake_griffin021912.jpg" class="img-responsive"/>
							<label>Blake Griffin</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Center</label>
							<img src="http://images.covers.com/editorial/2011/383x165/dwight_howard112911.jpg" class="img-responsive"/>
							<label>Dwight Howard</label>
						</div>
					</div>
				</div>
				<div class="row second">
					<div class="col-md-2 col-md-offset-1">
						<div class="centerBlock">
							<label>Reserve 1</label>
							<img src="http://media.philstar.com/images/the-philippine-star/sports/20161027/ps-jeremy-lin.jpg" class="img-responsive"/>
							<label>Jeremy Lin</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Reserve 2</label>
							<img src="http://www.trendingtoplists.com/wp-content/uploads/2015/05/ManuIsThinking_0.jpg" class="img-responsive"/>
							<label>Manu Ginobili</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Reserve 3</label>
							<img src="https://usatfantasy.files.wordpress.com/2015/11/ricky-rubio-minnestoa-timberwolves_102815.jpg?w=1000&h=700" class="img-responsive"/>
							<label>Ricky Rubio</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Reserve 4</label>
							<img src="http://media.philstar.com/images/the-philippine-star/sports/20170103/jimmy-butler-nba-bulls.jpg" class="img-responsive"/>
							<label>Jimmy Butler</label>
						</div>
					</div>
					<div class="col-md-2">
						<div class="centerBlock">
							<label>Reserve 5</label>
							<img src="https://ipacers.files.wordpress.com/2015/11/111815_paul-george_1200.jpg?w=1000&h=700&crop=1" class="img-responsive"/>
							<label>Paul George</label>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer class="footer">
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-2 col-md-offset-10">
					<dl>
						<dt>Created By</dt>
						<dd>Juhyun James Oh</dd>
						<dd>Zhisheng Lie</dd>
						<dd>Kevin Kim</dd>
					</dl>
					<p>&copy; NBADex</p>
				</div>
			</div>
		</div>
	</footer>
	<script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
	<script type="text/javascript">
			var config = {
			apiKey: "AIzaSyCcIuaDuAx9NFJKzBj4FkuR3e320eGuS_g",
			authDomain: "nbadex-ff8cf.firebaseapp.com",
			databaseURL: "https://nbadex-ff8cf.firebaseio.com",
			storageBucket: "nbadex-ff8cf.appspot.com",
			messagingSenderId: "172457613001"
			};

			firebase.initializeApp(config);
			const auth = firebase.auth();

			$(document).ready(function(){   
   				$('#LogOut').click(function() {
   					event.preventDefault();
            		firebase.auth().signOut();
    			});
			});

            firebase.auth().onAuthStateChanged(user => {
                if(user){
                    var user = firebase.auth().currentUser;
                    //to get the user id (uid) from the auth user

                    var email, uid;
                    email = user.email;
                    uid = user.uid; 

                    var usersRef = firebase.database().ref('users');

                    //check if user/ has a child node with the name of uid
                    usersRef.once('value').then(function(snapshot) {
                        //alert(snapshot.exists());
                        var hasID = snapshot.child(String(uid)).exists();
                        if (hasID) {
                            //alert("exist: "+uid);
                            
                            //TODO: if the uid folder exist, get the player data from this folder and do further operation
                        }
                        else {
                            //if there the current uid folder does NOT exist, create one for it
                            //TODO: create uid folder can be transfer to sign up page later
                            //alert("non-exist: "+uid);
                            var tempJson = {};
                            tempJson[uid] = {'username': email};

                            var database = firebase.database();
                            database.ref('users').update(tempJson);
                        }
                    }); 
                    
                    console.log('hi');
                    console.log(user);
                    //window.location = 'myTeamBootstrap.html'
                }
                else{
                	window.location = '../index.html';
                }
            });
        


	</script>

</body>
</html>

